<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OBRA Furniture Quotation App</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom Styles -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        @media print {
            body { background-color: white; }
            .no-print, header, .dashboard-section, .catalog-controls, .product-grid, .add-btn, .cart-trigger, .chart-container { display: none !important; }
            .print-only { display: block !important; }
            .modal-overlay { position: static; background: white; width: 100%; height: auto; }
            .modal-content { box-shadow: none; border: none; width: 100%; max-width: 100%; }
            .modal-header button, .modal-footer button, .remove-btn, .qty-btn { display: none !important; }
        }
        
        .print-only { display: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // --- CONFIGURATION ---
        // Change this value to adjust the price increase (e.g., 0.20 = 20%)
        const MARKUP_PERCENTAGE = 0.20;

        // --- RAW DATA SOURCE (Imported from CSV) ---
        const rawProductsDB = [
            { id: "088", name: "Storage Steel Cabinet - OBRA Office Furniture", description: "Durable storage steel cabinet with adjustable shelves.", price: 9180.0, category: "Storage", image: "https://obrafurniture.com/wp-content/uploads/2024/10/luh2-1.png" },
            { id: "cbt46015", name: "Mini-Conference Round Table", description: "Space saver with chrome plated stand. 2.5cm thickness.", price: 4899.0, category: "Tables", image: "https://obrafurniture.com/wp-content/uploads/2024/06/1000044390.jpg" },
            { id: "wls017", name: "2-doors Sliding Glass Steel Cabinet", description: "12mm tempered glass top, melamine legs.", price: 7299.0, category: "Storage", image: "https://i0.wp.com/obrafurniture.com/wp-content/uploads/2024/06/21-3.jpg?fit=600%2C343&ssl=1" },
            { id: "obd102", name: "D102 Bar Chair", description: "Stylish leather bar chair with cushioned seat.", price: 2632.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/10/lmaoo.png" },
            { id: "jd302", name: "JD302 Bar Chair", description: "Sleek bar chair with modern design.", price: 2497.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/10/garry.png" },
            { id: "os01w", name: "5 Layer Open Shelves", description: "Knock-down structure, electrostatic powder coating.", price: 8299.0, category: "Storage", image: "https://obrafurniture.com/wp-content/uploads/2024/06/15-3-1.jpg" },
            { id: "ch206a", name: "High-back Leatherette Executive Chair", description: "360-degree Swivel, Chrome-plated Star-base.", price: 10499.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/06/CH206A-ITO-NA.jpg" },
            { id: "1771_obct", name: "Conference Table - 10 Seater", description: "MDF Board with Tubular Steel. Modern design.", price: 13399.0, category: "Tables", image: "https://i0.wp.com/obrafurniture.com/wp-content/uploads/2024/06/58.jpg?resize=150%2C150&ssl=1" },
            { id: "33ja", name: "3-Door Wardrobe With 3 Drawers", description: "Ample storage space, hanging sections, and shelves.", price: 20182.0, category: "Storage", image: "https://obrafurniture.com/wp-content/uploads/2024/10/aurora-light-mode.png" },
            { id: "846", name: "4-Seater Workstation with Dividers", description: "Safety Lock Drawers, Metal Legs, MDF Laminated.", price: 29899.0, category: "Workstations", image: "https://obrafurniture.com/wp-content/uploads/2024/11/1000161269.png" },
            { id: "2161_obwt", name: "4 Seater Workstation Table", description: "240w x 120d x75h. Gray/Brown wood top.", price: 19699.0, category: "Workstations", image: "https://i0.wp.com/obrafurniture.com/wp-content/uploads/2024/06/1000044036.jpg?fit=600%2C600&ssl=1" },
            { id: "903bkonsx", name: "Mesh Office Teller Chair", description: "High gas lift, chrome base, mesh back.", price: 4299.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/06/903B-PIX.png" },
            { id: "ob6524", name: "4-Layer Shoe Rack", description: "Laminated wood, multiple tiers.", price: 1610.0, category: "Storage", image: "https://obrafurniture.com/wp-content/uploads/2024/10/6524-shoe-rack.png" },
            { id: "ob001c2", name: "Leatherette Stool Chair", description: "Compact, adjustable height, chrome base.", price: 2300.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/10/001C2JNSX-office-stool-chair.png" },
            { id: "obip5001", name: "Restaurant Table Base", description: "Sturdy base for restaurant table tops.", price: 1552.0, category: "Tables", image: "https://obrafurniture.com/wp-content/uploads/2024/10/table-base.png" },
            { id: "ob6523", name: "Shoe Rack", description: "3-tier laminated wood shoe rack.", price: 937.0, category: "Storage", image: "https://obrafurniture.com/wp-content/uploads/2024/10/6523-shoe-rack.png" },
            { id: "95cjnsx", name: "Fabric Clerical Chair", description: "No armrest, chrome base, gas lift.", price: 1999.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/06/95CJNSX-PIXEL.png" },
            { id: "jef1", name: "Jefferson Office Desk", description: "Key-lock triple side drawer, metal body.", price: 13899.0, category: "Tables", image: "https://obrafurniture.com/wp-content/uploads/2024/06/jefferson2_540x-1.webp" },
            { id: "oftg", name: "Glass Top Office Table", description: "140W x 60D. Side drawer, elevated top.", price: 9599.0, category: "Tables", image: "https://obrafurniture.com/wp-content/uploads/2024/06/1000046024.jpg" },
            { id: "3lrh", name: "3 Layer Vertical Steel Filing Cabinet", description: "Superior Gang Drawer locking system.", price: 6799.0, category: "Storage", image: "https://obrafurniture.com/wp-content/uploads/2024/06/1000044668.jpg" },
            { id: "1980ajnsx", name: "Mesh Office Chair 1980A", description: "Lumbar support, chrome base, adjustable.", price: 3399.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/06/1980A.png" },
            { id: "898ajnsx", name: "Mesh Office Chair 898", description: "Premium mesh, ergonomic design.", price: 3999.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/06/898AJNSX-PIXEL.png" },
            { id: "bk", name: "Executive Office Chair BK", description: "High-back leatherette, steel lumbar support.", price: 5399.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/06/49DJNTY-NEWWWW-1.jpg" },
            { id: "obcasinha", name: "Chest of Drawers", description: "Tall storage unit with multiple drawers.", price: 5700.0, category: "Storage", image: "https://obrafurniture.com/wp-content/uploads/2024/10/chch.png" },
            { id: "103", name: "L Type Executive Office Table", description: "160cm x 80cm. Melamine finish, combi-lock.", price: 14899.0, category: "Tables", image: "https://i0.wp.com/obrafurniture.com/wp-content/uploads/2024/06/103-16_18-3.jpg?resize=150%2C150&ssl=1" },
            { id: "mad140", name: "Madison Office Desk", description: "Triple side drawer, metal body, wood grain top.", price: 18599.0, category: "Tables", image: "https://obrafurniture.com/wp-content/uploads/2024/06/madison2_720x.webp" },
            { id: "ob4204", name: "Kapito Table Top", description: "Durable restaurant table top.", price: 3307.0, category: "Tables", image: "https://cdn.obrafurniture.com/wp-content/uploads/2024/10/kapito.png" },
            { id: "wls040", name: "Metal Display Cabinet WLS40", description: "Wood grain laminate, swing glass doors.", price: 11299.0, category: "Storage", image: "https://obrafurniture.com/wp-content/uploads/2024/06/5-1-2.jpg" },
            { id: "95cjnsxa", name: "Fabric Clerical Chair (Armrest)", description: "Comfortable fabric chair with armrests.", price: 2199.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/06/95CJNSX-PIXEL-1.png" },
            { id: "14", name: "TV Rack", description: "Modern TV rack with storage compartments.", price: 3277.0, category: "Storage", image: "https://obrafurniture.com/wp-content/uploads/2024/10/tv-rack.png" },
            { id: "001c2nsx", name: "Leatherette Stool Chair", description: "Sleek design, 360 swivel, adjustable.", price: 1899.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/06/1000043576.jpg" },
            { id: "a25816", name: "L-Type Executive Table A25816", description: "Mobile pedestal, movable drawers, CPU bin.", price: 17899.0, category: "Tables", image: "https://obrafurniture.com/wp-content/uploads/2024/11/1000161277.png" },
            { id: "86", name: "8-Door 6-Drawers Wardrobe", description: "Extensive storage, hanging sections, shelves.", price: 21600.0, category: "Storage", image: "https://obrafurniture.com/wp-content/uploads/2024/10/liverpool.png" },
            { id: "2166", name: "2 Seater Workstation", description: "120w x 120d. Powder coated legs, dividers.", price: 11899.0, category: "Workstations", image: "https://i0.wp.com/obrafurniture.com/wp-content/uploads/2024/06/2-SEATER-BROWN-WITH-MOBILE-PED.jpg?fit=600%2C600&ssl=1" },
            { id: "lb01", name: "Steel Locker Cabinet 1-Door", description: "Plastic recessed handle, padlock mechanism.", price: 5399.0, category: "Storage", image: "https://obrafurniture.com/wp-content/uploads/2024/06/4-1-3.jpg" },
            { id: "sm", name: "Electric Adjustable Table", description: "Sit-stand desk with electric motor.", price: 16828.0, category: "Tables", image: "https://obrafurniture.com/wp-content/uploads/2024/11/1000161261.png" },
            { id: "ob3107", name: "Manolya Table Top", description: "High quality restaurant table top.", price: 3307.0, category: "Tables", image: "https://obrafurniture.com/wp-content/uploads/2024/10/manolya-1.png" },
            { id: "d001", name: "Executive Office Chair D001", description: "Luxurious, wood back finish, leather.", price: 11899.0, category: "Chairs", image: "https://i0.wp.com/obrafurniture.com/wp-content/uploads/2024/06/18-2-1.jpg?fit=600%2C600&ssl=1" },
            { id: "ys1102", name: "Office Chair YS1102", description: "Nylon airflow backrest, chrome base.", price: 3399.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/06/YS-1102-PIXEL.jpg" },
            { id: "sj888", name: "Chrome Plated Bench", description: "Perforated seat and back rest. 3-seater.", price: 7899.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/06/10-2-3.jpg" },
            { id: "3", name: "Clerical Mesh Chair", description: "Heavy duty mesh, wide chrome starbase.", price: 2899.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/06/1000045151-1.jpg" },
            { id: "1495", name: "Gang Chair 4-Seater", description: "Durable gang chair for waiting areas.", price: 8199.0, category: "Chairs", image: "https://i0.wp.com/obrafurniture.com/wp-content/uploads/2024/06/31-2.jpg?fit=800%2C1200&ssl=1" },
            { id: "4303", name: "Modern Home Office Desk", description: "MDF Top, metal tubular frame.", price: 4699.0, category: "Tables", image: "https://obrafurniture.com/wp-content/uploads/2024/06/1000044477.jpg" },
            { id: "conf12", name: "Conference Table 12-Seater", description: "Large MDF board table with tubular steel.", price: 20299.0, category: "Tables", image: "https://i0.wp.com/obrafurniture.com/wp-content/uploads/2024/06/58.jpg?fit=600%2C600&ssl=1" },
            { id: "9927", name: "Office Chair 9927", description: "High-back leatherette, padded armrests.", price: 4799.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/06/9927-PIXEL.jpg" },
            { id: "ys814", name: "Office Chair YS814", description: "Mid-back, tilting armrests, chrome base.", price: 3399.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/06/YS814-PIXEL.jpg" },
            { id: "ys651", name: "Office Chair YS651", description: "Mid-back mesh, adjustable height.", price: 3099.0, category: "Chairs", image: "https://obrafurniture.com/wp-content/uploads/2024/06/YS651-PIXEL.jpg" },
            { id: "069w", name: "4-Door Apparatus Cabinet", description: "Steel cabinet for tools and equipment.", price: 10125.0, category: "Storage", image: "https://obrafurniture.com/wp-content/uploads/2024/10/aparatus2.png" },
            { id: "brw", name: "Solid Office Table", description: "120cm wide, 75cm high. Sturdy design.", price: 3949.0, category: "Tables", image: "https://obrafurniture.com/wp-content/uploads/2024/08/1000051012.png" },
            { id: "066", name: "Heavy Duty Steel Rack", description: "5-layer, 100kg per shelf capacity.", price: 6299.0, category: "Storage", image: "https://obrafurniture.com/wp-content/uploads/2024/06/1000044880.jpg" },
            { id: "part2", name: "Partition 2 Straight", description: "Seamless divisions for privacy.", price: 32861.0, category: "Partitions", image: "https://obrafurniture.com/wp-content/uploads/2024/10/Screenshot-2024-10-02-191950-2.png" },
            { id: "gds01", name: "Freestanding Table", description: "Metal top, sturdy frame.", price: 4499.0, category: "Tables", image: "https://obrafurniture.com/wp-content/uploads/2024/06/10-2-1.jpg" },
            { id: "100tone", name: "2 Tone Office Table 100cm", description: "100W x 50D. Secure side drawer.", price: 4599.0, category: "Tables", image: "https://i0.wp.com/obrafurniture.com/wp-content/uploads/2024/06/12-4-1.jpg?resize=150%2C150&ssl=1" },
            { id: "gt180", name: "Glass Top Exec Table 180cm", description: "Tempered glass, extension table included.", price: 20299.0, category: "Tables", image: "https://i0.wp.com/obrafurniture.com/wp-content/uploads/2024/06/6-3.webp?fit=800%2C1200&ssl=1" },
            { id: "a1816", name: "L-Type Exec Table A1816", description: "Built-in fan, wire management, LED accent.", price: 25799.0, category: "Tables", image: "https://obrafurniture.com/wp-content/uploads/2024/11/1000161272.png" }
        ];

        // --- MARKUP APPLICATION LOGIC ---
        // Dynamically apply markup to all products
        const productsDB = rawProductsDB.map(product => ({
            ...product,
            price: product.price * (1 + MARKUP_PERCENTAGE)
        }));

        // --- COMPONENTS ---

        // 1. Dashboard Component (Chart.js Integration)
        const Dashboard = ({ products }) => {
            const chartRef = useRef(null);
            const canvasRef = useRef(null);

            useEffect(() => {
                // Prepare Data
                const categoryCounts = products.reduce((acc, product) => {
                    const cat = product.category || "Uncategorized";
                    acc[cat] = (acc[cat] || 0) + 1;
                    return acc;
                }, {});

                const labels = Object.keys(categoryCounts);
                const data = Object.values(categoryCounts);

                // Destroy old chart if exists
                if (chartRef.current) {
                    chartRef.current.destroy();
                }

                // Create new Chart
                const ctx = canvasRef.current.getContext('2d');
                chartRef.current = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Inventory Count',
                            data: data,
                            backgroundColor: 'rgba(13, 148, 136, 0.7)', // Teal-600
                            borderColor: 'rgba(13, 148, 136, 1)',
                            borderWidth: 1,
                            borderRadius: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            title: { display: true, text: 'Product Catalog Distribution' }
                        },
                        scales: {
                            y: { beginAtZero: true }
                        }
                    }
                });

                return () => {
                    if (chartRef.current) chartRef.current.destroy();
                }
            }, [products]);

            return (
                <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-8 dashboard-section">
                    <h2 className="text-xl font-bold text-gray-800 mb-2">Inventory Dashboard</h2>
                    <p className="text-sm text-gray-500 mb-6">Real-time overview of available products by category.</p>
                    <div className="chart-container">
                        <canvas ref={canvasRef}></canvas>
                    </div>
                </div>
            );
        };

        // 2. Product Card Component
        const ProductCard = ({ product, addToQuote }) => (
            <div className="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden flex flex-col hover:shadow-md transition-shadow h-full group">
                <div className="h-48 overflow-hidden bg-gray-50 relative p-4 flex items-center justify-center">
                    <img 
                        src={product.image || "https://via.placeholder.com/300?text=No+Image"} 
                        alt={product.name} 
                        className="max-h-full max-w-full object-contain group-hover:scale-105 transition-transform duration-300"
                        onError={(e) => { e.target.src = "https://via.placeholder.com/300?text=No+Image"; }}
                    />
                </div>
                <div className="p-4 flex-grow flex flex-col">
                    <div className="mb-2">
                        <span className="text-xs font-bold text-teal-600 uppercase tracking-wider bg-teal-50 px-2 py-1 rounded-full">{product.category}</span>
                    </div>
                    <h3 className="font-semibold text-gray-800 line-clamp-2 mb-1 text-sm md:text-base h-10" title={product.name}>{product.name}</h3>
                    <p className="text-gray-500 text-xs mb-3 line-clamp-3 flex-grow">{product.description}</p>
                    <div className="flex items-center justify-between mt-auto pt-3 border-t border-gray-50">
                        <span className="font-bold text-teal-700 text-lg">
                            {product.price > 0 ? `₱${product.price.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}` : 'Ask Price'}
                        </span>
                        <button 
                            onClick={() => addToQuote(product)}
                            className="bg-teal-600 hover:bg-teal-700 text-white w-8 h-8 rounded-full flex items-center justify-center transition-colors shadow-sm add-btn"
                            title="Add to Quote"
                        >
                            <i className="fas fa-plus text-sm"></i>
                        </button>
                    </div>
                </div>
            </div>
        );

        // 3. Cart/Quote Modal Component
        const CartModal = ({ cart, updateQuantity, removeFromCart, isOpen, onClose }) => {
            if (!isOpen) return null;

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

            const handlePrint = () => {
                window.print();
            };

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-end transition-opacity duration-300 modal-overlay" onClick={onClose}>
                    <div className="bg-white w-full max-w-md h-full shadow-2xl flex flex-col transform transition-transform duration-300 modal-content" onClick={e => e.stopPropagation()}>
                        <div className="p-5 border-b flex justify-between items-center bg-teal-700 text-white modal-header">
                            <h2 className="text-xl font-bold flex items-center gap-2">
                                <i className="fas fa-file-invoice"></i> Quote Summary
                            </h2>
                            <button onClick={onClose} className="hover:bg-teal-800 p-2 rounded transition-colors">
                                <i className="fas fa-times text-xl"></i>
                            </button>
                        </div>

                        <div className="flex-grow overflow-y-auto p-5 space-y-4">
                            {cart.length === 0 ? (
                                <div className="text-center text-gray-400 mt-20 flex flex-col items-center">
                                    <i className="fas fa-shopping-cart text-4xl mb-4 opacity-30"></i>
                                    <p className="text-lg font-medium">Your quote list is empty.</p>
                                    <p className="text-sm text-gray-400 mt-2">Start adding items from the catalog.</p>
                                </div>
                            ) : (
                                cart.map(item => (
                                    <div key={item.id} className="flex gap-4 border-b border-gray-100 pb-4 last:border-0">
                                        <div className="w-16 h-16 bg-gray-50 rounded-md overflow-hidden flex-shrink-0 border border-gray-200">
                                            <img src={item.image} alt={item.name} className="w-full h-full object-contain p-1" />
                                        </div>
                                        <div className="flex-grow">
                                            <h4 className="font-medium text-gray-800 text-sm line-clamp-2 mb-1">{item.name}</h4>
                                            <p className="text-teal-600 font-bold text-sm">₱{item.price.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</p>
                                            <div className="flex items-center gap-3 mt-2 no-print">
                                                <div className="flex items-center border border-gray-200 rounded-md bg-gray-50">
                                                    <button 
                                                        onClick={() => updateQuantity(item.id, -1)}
                                                        className="px-2 py-1 hover:bg-gray-200 text-gray-600 transition-colors qty-btn"
                                                    >
                                                        <i className="fas fa-minus text-xs"></i>
                                                    </button>
                                                    <span className="w-8 text-center text-sm font-medium bg-white h-full flex items-center justify-center">{item.quantity}</span>
                                                    <button 
                                                        onClick={() => updateQuantity(item.id, 1)}
                                                        className="px-2 py-1 hover:bg-gray-200 text-gray-600 transition-colors qty-btn"
                                                    >
                                                        <i className="fas fa-plus text-xs"></i>
                                                    </button>
                                                </div>
                                                <button 
                                                    onClick={() => removeFromCart(item.id)}
                                                    className="text-red-400 hover:text-red-600 ml-auto p-1 rounded hover:bg-red-50 transition-colors remove-btn"
                                                    title="Remove Item"
                                                >
                                                    <i className="fas fa-trash-alt"></i>
                                                </button>
                                            </div>
                                            {/* Print only qty view */}
                                            <div className="print-only text-sm text-gray-600 mt-1">
                                                Qty: {item.quantity}
                                            </div>
                                        </div>
                                    </div>
                                ))
                            )}
                        </div>

                        <div className="p-5 border-t border-gray-200 bg-gray-50 modal-footer">
                            <div className="flex justify-between items-center mb-4">
                                <span className="text-gray-600 font-medium">Total Estimate</span>
                                <span className="text-2xl font-bold text-teal-700">₱{total.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span>
                            </div>
                            <button 
                                onClick={handlePrint}
                                disabled={cart.length === 0}
                                className="w-full bg-teal-600 hover:bg-teal-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-bold py-3 rounded-lg flex items-center justify-center gap-2 transition-all shadow-md hover:shadow-lg"
                            >
                                <i className="fas fa-print"></i> Print Quote / Save PDF
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // 4. Main App Component
        const App = () => {
            const [cart, setCart] = useState([]);
            const [isCartOpen, setIsCartOpen] = useState(false);
            const [searchTerm, setSearchTerm] = useState("");
            const [categoryFilter, setCategoryFilter] = useState("All");

            const categories = ["All", ...new Set(productsDB.map(p => p.category || "General"))];

            const filteredProducts = useMemo(() => {
                return productsDB.filter(product => {
                    const matchesSearch = product.name.toLowerCase().includes(searchTerm.toLowerCase());
                    const matchesCategory = categoryFilter === "All" || product.category === categoryFilter;
                    return matchesSearch && matchesCategory;
                });
            }, [searchTerm, categoryFilter]);

            const addToQuote = (product) => {
                setCart(prev => {
                    const existing = prev.find(item => item.id === product.id);
                    if (existing) {
                        return prev.map(item => item.id === product.id ? { ...item, quantity: item.quantity + 1 } : item);
                    }
                    return [...prev, { ...product, quantity: 1 }];
                });
                setIsCartOpen(true);
            };

            const updateQuantity = (id, change) => {
                setCart(prev => prev.map(item => {
                    if (item.id === id) {
                        const newQty = Math.max(1, item.quantity + change);
                        return { ...item, quantity: newQty };
                    }
                    return item;
                }));
            };

            const removeFromCart = (id) => {
                setCart(prev => prev.filter(item => item.id !== id));
            };

            return (
                <div className="min-h-screen flex flex-col">
                    {/* Header */}
                    <header className="bg-white shadow-sm sticky top-0 z-30 border-b border-gray-200">
                        <div className="container mx-auto px-4 h-16 flex items-center justify-between">
                            <div className="flex items-center gap-2 cursor-pointer" onClick={() => window.location.reload()}>
                                <div className="w-10 h-10 bg-teal-600 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-sm">O</div>
                                <div>
                                    <h1 className="text-xl font-bold tracking-tight text-gray-900 leading-none">OBRA</h1>
                                    <span className="text-xs text-teal-600 font-medium tracking-wide uppercase">Furniture</span>
                                </div>
                            </div>
                            
                            <button 
                                onClick={() => setIsCartOpen(true)}
                                className="relative p-2 hover:bg-gray-100 rounded-full transition-colors group cart-trigger"
                            >
                                <i className="fas fa-shopping-cart text-xl text-gray-600 group-hover:text-teal-600 transition-colors"></i>
                                {cart.length > 0 && (
                                    <span className="absolute top-0 right-0 bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center shadow-sm animate-pulse">
                                        {cart.length}
                                    </span>
                                )}
                            </button>
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="container mx-auto px-4 py-8 max-w-7xl flex-grow">
                        
                        <!-- Chosen Palette: Teal & Warm Neutrals -->
                        <!-- Application Structure Plan: 
                             1. Dashboard: Shows Chart.js viz of inventory (Consumable & Explorable).
                             2. Controls: Search & Category pills for easy navigation.
                             3. Grid: Product cards for browsing.
                             4. Modal: Quote summary for synthesizing the data into a document.
                        -->

                        {/* Dashboard Section */}
                        <Dashboard products={productsDB} />

                        {/* Controls Section */}
                        <div className="mb-8 flex flex-col md:flex-row gap-4 items-center catalog-controls">
                            <div className="relative flex-grow w-full md:w-auto">
                                <i className="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                <input 
                                    type="text" 
                                    placeholder="Search chairs, tables, cabinets..." 
                                    className="w-full pl-10 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 shadow-sm transition-shadow"
                                    value={searchTerm}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                />
                            </div>
                            <div className="flex overflow-x-auto gap-2 pb-2 md:pb-0 w-full md:w-auto">
                                {categories.map(cat => (
                                    <button
                                        key={cat}
                                        onClick={() => setCategoryFilter(cat)}
                                        className={`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${
                                            categoryFilter === cat 
                                                ? 'bg-teal-600 text-white shadow-md transform scale-105' 
                                                : 'bg-white text-gray-600 border border-gray-200 hover:bg-gray-50 hover:border-gray-300'
                                        }`}
                                    >
                                        {cat}
                                    </button>
                                ))}
                            </div>
                        </div>

                        {/* Catalog Section */}
                        <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 product-grid">
                            <!-- Visualization & Content Choices:
                                 - Product Cards: Display Image, Name, Price, Category.
                                 - Goal: Explore & Compare.
                                 - Interaction: Hover effects, "Add to Quote" button.
                                 - No SVG/Mermaid used for data viz, only Chart.js above.
                            -->
                            {filteredProducts.map(product => (
                                <ProductCard key={product.id} product={product} addToQuote={addToQuote} />
                            ))}
                        </div>

                        {filteredProducts.length === 0 && (
                            <div className="text-center py-20 bg-white rounded-xl border border-dashed border-gray-300">
                                <i className="fas fa-search text-4xl text-gray-300 mb-4"></i>
                                <p className="text-gray-500 text-lg font-medium">No products found matching "{searchTerm}"</p>
                                <p className="text-gray-400 text-sm mt-1">Try adjusting your search or category filter.</p>
                                <button 
                                    onClick={() => {setSearchTerm(""); setCategoryFilter("All");}}
                                    className="mt-4 text-teal-600 font-medium hover:underline"
                                >
                                    Clear filters
                                </button>
                            </div>
                        )}
                    </main>

                    {/* Footer */}
                    <footer className="bg-white border-t border-gray-200 py-8 no-print">
                        <div className="container mx-auto px-4 text-center text-gray-500 text-sm">
                            <p className="mb-2">&copy; {new Date().getFullYear()} OBRA Office Furniture. All rights reserved.</p>
                            <p>Metro Manila, Philippines | +63 123 456 7890</p>
                        </div>
                    </footer>

                    {/* Cart Sidebar Modal */}
                    <CartModal 
                        cart={cart}
                        updateQuantity={updateQuantity}
                        removeFromCart={removeFromCart}
                        isOpen={isCartOpen}
                        onClose={() => setIsCartOpen(false)}
                    />

                    {/* Print Layout (Only visible when printing) */}
                    <div className="hidden print-only p-8 bg-white h-screen w-full absolute top-0 left-0 z-[9999]">
                        <div className="flex justify-between items-start mb-8 border-b-2 border-gray-800 pb-6">
                            <div>
                                <h1 className="text-4xl font-bold text-gray-900 mb-1">OBRA Furniture</h1>
                                <p className="text-gray-600 text-sm uppercase tracking-wide">Quotation / Estimate</p>
                            </div>
                            <div className="text-right">
                                <p className="text-sm font-bold text-gray-900">Date:</p>
                                <p className="text-sm text-gray-600">{new Date().toLocaleDateString()}</p>
                            </div>
                        </div>

                        <div className="space-y-6">
                            <table className="w-full text-left">
                                <thead>
                                    <tr className="border-b border-gray-300 bg-gray-50">
                                        <th className="py-3 px-2 font-bold text-gray-700 w-1/2">Product Description</th>
                                        <th className="py-3 px-2 text-right font-bold text-gray-700">Unit Price</th>
                                        <th className="py-3 px-2 text-center font-bold text-gray-700">Qty</th>
                                        <th className="py-3 px-2 text-right font-bold text-gray-700">Total</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {cart.map(item => (
                                        <tr key={item.id} className="border-b border-gray-100">
                                            <td className="py-4 px-2">
                                                <div className="font-bold text-gray-900">{item.name}</div>
                                                <div className="text-xs text-gray-500 mt-1">{item.description}</div>
                                            </td>
                                            <td className="py-4 px-2 text-right text-gray-700">₱{item.price.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                                            <td className="py-4 px-2 text-center text-gray-700">{item.quantity}</td>
                                            <td className="py-4 px-2 text-right font-medium text-gray-900">₱{(item.price * item.quantity).toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                                        </tr>
                                    ))}
                                </tbody>
                                <tfoot>
                                    <tr className="border-t-2 border-gray-800">
                                        <td colSpan="3" className="py-4 px-2 text-right font-bold text-xl uppercase text-gray-800">Grand Total</td>
                                        <td className="py-4 px-2 text-right font-bold text-xl text-teal-700">
                                            ₱{cart.reduce((sum, item) => sum + (item.price * item.quantity), 0).toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}
                                        </td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>

                        <div className="mt-16 border-t border-gray-200 pt-8">
                            <div className="flex justify-between items-end">
                                <div>
                                    <p className="font-bold text-gray-800 mb-2">Terms & Conditions:</p>
                                    <ul className="text-xs text-gray-500 list-disc ml-4 space-y-1">
                                        <li>Prices are valid for 30 days from the
